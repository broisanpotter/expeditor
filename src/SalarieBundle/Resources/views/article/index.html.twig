{% extends 'base.html.twig' %}

{% block body %}
    <h1 class="h1 text-center">Liste d'articles</h1>

    <div class="col-lg-12">
        <button class="btn btn-primary float-right" onclick="document.location.href='{{ path('article_new')}}'">Ajouter un article</button>
        <br/>
        <br/>
        <table class="table text-center table-bordered table-sm">
            <thead>
            <tr class="thead-dark">
                <th>Id</th>
                <th>Libelle</th>
                <th>Poids</th>
                <th>Actions</th>
            </tr>
            </thead>
            <tbody>
            {% for article in articles %}
                <tr>
                    <td class="id">{{ article.id }}</td>
                    <td class="libelle">{{ article.libelle }}</td>
                    <td class="poids">{{ article.poids }}</td>
                    <td>
                        <ul>
                            <button class="btn btn-warning" onclick="document.location.href='{{ path('article_edit', { 'id': article.id }) }}'">Modifier</button>
                        </ul>
                    </td>
                </tr>
            {% endfor %}
            </tbody>
        </table>
    </div>

    <script>
        function updateForm(button){
            var row = $(button).parent().parent().parent();
            var id = row.find(".id").text();
            var libelle = row.find(".libelle").text();
            var poids = row.find(".poids").text();
            var url = "{{ path('article_edit', { 'id': 'id_article' }) }}";
            url = url.replace("id_article", id);
            $('#formUpdate').attr('action', url);

            $("#libelle").val(libelle);
            $("#poids").val(poids);
        }

        function deleteForm(button){
            var row = $(button).parent().parent().parent();
            var id = row.find(".id").text();
            var url = "{{ path('article_delete', { 'id': 'id_article' }) }}";
            url = url.replace("id_article", id);
            $('#formDelete').attr('action', url);
        }
    </script>

{% endblock %}
